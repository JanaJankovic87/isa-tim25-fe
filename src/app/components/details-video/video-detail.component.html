<div class="page" *ngIf="video">
  
  <div class="top-actions">
    <button class="back-btn" (click)="goBack()">
      <svg width="20" height="20" viewBox="0 0 24 24">
        <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
      </svg>
      Back
    </button>

    <button 
      *ngIf="isMyVideo()"
      class="delete-btn" 
      (click)="deleteVideo()"
      title="Delete video">
      <svg width="20" height="20" viewBox="0 0 24 24">
        <path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
      </svg>
      Delete Video
    </button>
  </div>

  <div class="container">
    
    <div class="video-section">
      
      
      <div class="player-box">
        <video [src]="getVideoUrl()" controls autoplay class="player"></video>
      </div>

      
      <div class="info-box">
        <h1 class="title">{{ video.title }}</h1>
        
        <div class="video-stats" style="display: flex; gap: 12px; align-items: center;">
          <button 
            class="like-btn"
            [class.liked]="video.likedByCurrentUser"
            (click)="toggleLike()"
            *ngIf="authService.isLoggedIn()"
          >
            <svg width="24" height="24" viewBox="0 0 24 24" [attr.fill]="video.likedByCurrentUser ? 'currentColor' : 'none'" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
            <span>{{ video.likesCount || 0 }}</span>
          </button>
          <button class="views-btn" style="display: flex; align-items: center; background: none; border: 2px solid #e0e0e0; color: #666; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <span style="margin-left: 4px;"> {{ viewCount }}</span>
          </button>
        </div>
        
        <div class="meta">
          <span *ngIf="video.createdAt">{{ formatDate(video.createdAt) }}</span>
          <span *ngIf="video.location">{{ video.location }}</span>
        </div>

        <div class="tags" *ngIf="video.tags && video.tags.length > 0">
          <span *ngFor="let tag of video.tags" class="tag">#{{ tag }}</span>
        </div>

        <div class="description-section">
          <h3>Description</h3>
          <p>{{ video.description }}</p>
        </div>
      </div>

      
      <div class="comments-section">
        <app-comments *ngIf="videoId" [videoId]="+videoId"></app-comments>
      </div>

    </div>

  </div>

</div>